<template>
    <div i="wechat-material-added">
        <div class="title">
            <h2>{{pre_data.title}}</h2>
        </div>
        <div class="time">
            <span>{{pre_data.updated_at | date}}</span>
            <span>{{pre_data.author}}</span>
        </div>
        <div class="pre-content" v-html="pre_data.content"></div>
    </div>
</template>
<style rel="stylesheet/scss" lang="scss">
    @import "../../../assets/tool";    
    [i="wechat-material-added"]{
        margin: 0 auto;
        width: 700px;
        padding: 20px 15px 15px;
        .title{
            h2{
                padding-bottom: 10px;
                margin-bottom: 14px;
                border-bottom: 1px solid #e7e7eb;
                line-height: 1.4;
                font-weight: 400;
                font-size: 24px;
            }
        }
        .time{
            margin-bottom: 18px;
            line-height: 20px;
            span{
                color: #8c8c8c;
                display: inline-block;
                vertical-align: middle;
                margin-right: 8px;
                margin-bottom: 10px;
                font-size: 16px;
            }
        }

    }
</style>
<script>    
    export default{
        data(){
            this.crumbs.push({name:'微信管理'},{name:'素材管理',url:'/wechat/material/material'},{name:'图文预览'});
            return {
                pre_data:{}
            }
        },
        props: ['crumbs'],
        computed:{

        },
        methods: {
            getData: function(){
                let that = this;

                tools.alert.loading();
                tools.ajax({
                    url: '/api/admin/wechat/newses/' + tools.url.params('id'),
                    ajaxData: {},
                    successFun: function (res) {
                        tools.alert.closeLoading();
                        if(res && res.status){
                            that.pre_data = res.data;
                        }
                    },
                    errorFun: function (error_data, status, headers, error_obj) {
                        tools.alert.closeLoading();
                        tools.alert.error(error_data.error_msg);
                    },
                    type: 'GET'
                });

            }
        },
        components: {
        },
        filters:{
            date: function (timestamp, format){
                //let f = 'Y-m-d H:i';
                let f = 'Y年m月d日';
                if(format){
                    f = format;
                }
                return tools.date(f, timestamp);
            },

        },
        watch:{

        },
        mounted(){
            this.getData();

        }
    }
</script>
